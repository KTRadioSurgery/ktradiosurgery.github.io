<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Contour Plot</title>
    <script src="https://cdn.plot.ly/plotly-2.25.2.min.js"></script>
</head>
<body>
    <div id="plot" style="width: 100%; height: 100vh;"></div>
    <script>
        // Define x and y ranges, and t values to loop over
        const xRange = [-10, 10];
        const yRange = [-10, 10];
        const tValues = [3, 5, 7, 11]; // Specific t values to cycle over
        const resolution = 50; // Resolution of the grid

        // Function to generate data for a specific t
        const generateData = (t) => {
            const x = Array.from({ length: resolution }, (_, i) => xRange[0] + i * (xRange[1] - xRange[0]) / (resolution - 1));
            const y = Array.from({ length: resolution }, (_, i) => yRange[0] + i * (yRange[1] - yRange[0]) / (resolution - 1));
            const z = x.map(xVal => y.map(yVal => {
                // Replace with your actual function; currently using a placeholder
                return Math.sin(Math.sqrt(xVal ** 2 + yVal ** 2) - t);
            }));
            return { x, y, z };
        };

        // Create traces for each t value in tValues
        const contours = tValues.map(t => {
            const { x, y, z } = generateData(t);
            return {
                x: x,
                y: y,
                z: z,
                type: 'contour',
                contours: {
                    coloring: 'lines', // Draw contour lines
                    showlabels: true, // Show labels for contour levels
                    labelfont: { size: 12, color: 'white' }
                },
                name: `t = ${t}` // Label for the legend
            };
        });

        // Plotly layout and config for interactivity
        const layout = {
            title: 'Interactive Contour Plot',
            xaxis: { range: xRange, title: 'X Axis' },
            yaxis: { range: yRange, title: 'Y Axis' },
            dragmode: 'pan', // Enable panning
        };

        const config = {
            scrollZoom: true, // Enable zoom with mouse scroll
            doubleClick: false, // Disable reset on double-click
            responsive: true, // Adjust to viewport
            displayModeBar: true, // Show the mode bar for mobile users
            modeBarButtonsToAdd: ['toggleSpikelines'], // Add extra functionality
        };

        // Add touch support for mobile
        const plotDiv = document.getElementById('plot');
        plotDiv.addEventListener('touchmove', (event) => {
            if (event.scale !== undefined) {
                event.preventDefault(); // Prevent default scrolling
            }
        });

        // Render the plot
        Plotly.newPlot('plot', contours, layout, config);
    </script>
</body>
</html>