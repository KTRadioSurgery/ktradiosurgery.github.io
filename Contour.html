<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parametric Contour Plot with Sliders</title>
    <script src="https://cdn.plot.ly/plotly-2.25.2.min.js"></script>
</head>
<body>
    <div>
        <label for="slider1">a/b normal:</label>
        <input type="range" id="slider1" min="1" max="10" step="0.1" value="3">
        <span id="slider1Value">3</span>
    </div>
    <div>
        <label for="slider2">a/b tumor:</label>
        <input type="range" id="slider2" min="1" max="10" step="0.1" value="3">
        <span id="slider2Value">3</span>
    </div>
    <div id="plot" style="width: 100%; height: 80vh;"></div>
    <script>
        // Define parametric range and list of 'c' values
        const cValues = [3, 5, 7, 11]; // Specific c values for contours
        const tSteps = 100; // Number of steps for parametric equations

        // Viridis color palette (subset matching the number of contours)
        const viridisColors = [
            '#440154', '#482878', '#3E4989', '#31688E',
            '#26828E', '#1F9D89', '#6CCE5A', '#B6DE2B'
        ];
        const contourColors = viridisColors.slice(0, cValues.length);

        // Generate parametric x, y coordinates for a specific c
        const generateParametricData = (c) => {
            const tArray = Array.from({ length: tSteps }, (_, i) => i / (tSteps - 1));
            const x = tArray.map(t => Math.cos(2 * Math.PI * t) * (1 + c * 0.1)); // Example formula
            const y = tArray.map(t => Math.sin(2 * Math.PI * t) * (1 + c * 0.1)); // Example formula
            return { x, y };
        };

        // Create traces for each value of c
        const traces = cValues.map((c, index) => {
            const { x, y } = generateParametricData(c);
            return {
                x: x,
                y: y,
                mode: 'lines',
                line: {
                    color: contourColors[index],
                    width: 2
                },
                name: `c = ${c}` // Label for the legend
            };
        });

        
            const layout = {
                title: 'Parametric Contour Plot with Sliders',
                xaxis: { title: 'Todal Dose', zeroline: false },
                yaxis: { title: 'BED', zeroline: false },
                dragmode: 'pan'
            };

            const config = {
                scrollZoom: true,
                responsive: true,
                displayModeBar: true
            };

            Plotly.newPlot('plot', [trace], layout, config);
        };

        // Add event listeners for the sliders
        document.getElementById('slider1').addEventListener('input', (event) => {
            param1 = parseFloat(event.target.value);
            document.getElementById('slider1Value').textContent = param1;
            updatePlot();
        });

        document.getElementById('slider2').addEventListener('input', (event) => {
            param2 = parseFloat(event.target.value);
            document.getElementById('slider2Value').textContent = param2;
            updatePlot();
        });

        // Initial plot rendering
        updatePlot();
    </script>
</body>
</html>
