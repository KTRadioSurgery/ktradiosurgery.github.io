<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parametric Contour Plot with Sliders</title>
    <script src="https://cdn.plot.ly/plotly-2.25.2.min.js"></script>
</head>
<body>
    <div>
        <label for="slider1">a/b normal:</label>
        <input type="range" id="slider1" min="1" max="10" step="0.1" value="3">
        <span id="slider1Value">3</span>
    </div>
    <div>
        <label for="slider2">a/b tumor:</label>
        <input type="range" id="slider2" min="1" max="10" step="0.1" value="3">
        <span id="slider2Value">3</span>
    </div>
    <div id="plot" style="width: 100%; height: 80vh;"></div>
    <script>
        const tSteps = 100; // Number of steps for parametric equations

        // Generate parametric x, y coordinates based on two parameters
        const generateParametricData = (param1, param2) => {
            const tArray = Array.from({ length: tSteps }, (_, i) => i / (tSteps - 1));
            const x = tArray.map(t => Math.cos(2 * Math.PI * t) * (1 + param1 * 0.1)); // Formula using param1
            const y = tArray.map(t => Math.sin(2 * Math.PI * t) * (1 + param2 * 0.1)); // Formula using param2
            return { x, y };
        };

        // Initial parameter values
        let param1 = 3;
        let param2 = 3;

        // Update plot with current parameter values
        const updatePlot = () => {
            const { x, y } = generateParametricData(param1, param2);
            const trace = {
                x: x,
                y: y,
                mode: 'lines',
                line: {
                    color: '#1f77b4',
                    width: 2
                },
                name: `Param1: ${param1}, Param2: ${param2}` // Label for the legend
            };

            const layout = {
                title: 'Parametric Contour Plot with Sliders',
                xaxis: { title: 'Todal Dose', zeroline: false },
                yaxis: { title: 'BED', zeroline: false },
                dragmode: 'pan'
            };

            const config = {
                scrollZoom: true,
                responsive: true,
                displayModeBar: true
            };

            Plotly.newPlot('plot', [trace], layout, config);
        };

        // Add event listeners for the sliders
        document.getElementById('slider1').addEventListener('input', (event) => {
            param1 = parseFloat(event.target.value);
            document.getElementById('slider1Value').textContent = param1;
            updatePlot();
        });

        document.getElementById('slider2').addEventListener('input', (event) => {
            param2 = parseFloat(event.target.value);
            document.getElementById('slider2Value').textContent = param2;
            updatePlot();
        });

        // Initial plot rendering
        updatePlot();
    </script>
</body>
</html>
